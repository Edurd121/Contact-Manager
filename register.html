

<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Login</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
		rel="stylesheet"
		integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
		crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
		crossorigin="anonymous"></script>
</head>

	<body>
		<div class="card border-dark mb-3" style="width: 50rem;">
			<img src="..." class="card-img-top" alt="placeholder for future images">
			<div class="card-body">
				<div class="card-header">
					<h5 class="card-title">Register</h5>
				</div>
				<form class="col g-3" method = "post">
					<div class="mb-3 row">
						<label for="inputFirstName" class="col-sm-2 col-form-label">First Name</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" id="inputFirst" name = "FirstName">
						</div>


					</div>

					<div class="mb-3 row">
						<label for="inputLastName" class="col-sm-2 col-form-label">Last Name</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" id="inputLast"   name = "LastName">
						</div>
					</div>

					<div class="mb-3 row">
						<label for="inputUser" class="col-sm-2 col-form-label">User</label>
						<div class="col-sm-4">
							<input type="text" class="form-control" id="inputUser"  name = "Login" >
						</div>
					</div>
					
					<div class="mb-3 row">
						<label for="inputPassword" class="col-sm-2 col-form-label">Password</label>
						<div class="col-sm-4">
							<input type="password" class="form-control" id="inputPassword" name = "Password">
						</div>

						<div class="row-auto">
							<button type="submit" class="btn btn-primary mb-3" name = "sign_user" onclick="addUser();">Sign Up</button>
						</div>

						<p>Got an account? <a href="login.html">Log in here</a>
					</div>
				</form>
					<span id="userAddResult"></span>

			</div>
		<div>

	</body>

</html>

	<script type="text/javascript">
		function test() {
			console.log("We are in test!");
			var first = document.getElementById("inputFirst").value
			var last = document.getElementById("inputLast").value
			var username = document.getElementById("inputUser").value
			var password = document.getElementById("inputPassword").value
			// var creds = "uname="+username+"&passwd="+passwrd;
			// var creds = "firstName=" + first + "&lastName=" + last + "&Login="+username+"&Password="+passwrd;
			var creds = '{"firstName" : "' + first + '", "lastName" : "' + last + '", "Login" : "' + username + '", "Password" : "' + password + '"}';

			var ajx = new XMLHttpRequest();
			ajx.onreadystatechange = function () {
				if (ajx.readyState == 4 && ajx.status == 200) {
					alert(ajx.responseText);
				}
			};

			// ajx.open("POST", "./LAMPAPI/Signup.php", true);
			
			ajx.open("POST", "./LAMPAPI/registerUser.php", true);
			// ajx.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			ajx.setRequestHeader("Content-type", "application/json; charset=UTF-8");

			ajx.send(creds);
			console.log("We got through the function, without killing our website");
		}
		function addUser() {
			var urlBase = 'http://COP4331-29.com/contact-manager';
			var extension = 'php';

			var first = document.getElementById("inputFirst").value
			var last = document.getElementById("inputLast").value
			var username = document.getElementById("inputUser").value
			var password = document.getElementById("inputPassword").value
			document.getElementById("colorAddResult").innerHTML = "";

			var creds = '{"firstName" : "' + first + '", "lastName" : "' + last + '", "Login" : "' + username + '", "Password" : "' + password + '"}';
				var url = urlBase + '/registerUser.' + extension;

				var xhr = new XMLHttpRequest();
				xhr.open("POST", url, true);
				xhr.setRequestHeader("Content-type", "application/json; charset=UTF-8");
				try {
					xhr.onreadystatechange = function () {
						if (this.readyState == 4 && this.status == 200) {
							document.getElementById("userAddResult").innerHTML = "Color has been added";
						}
					};
					xhr.send(jsonPayload);
				}
				catch (err) {
					document.getElementById("userAddResult").innerHTML = err.message;
				}

			}
	</script>